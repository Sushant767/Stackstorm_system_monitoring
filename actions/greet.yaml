
name: greet
pack: hello_st2
description: Run a series of simulated actions
enabled: true
runner_type: orquesta
entry_point: workflows/greet.yaml

parameters:
   cmd_cpu:
       required: true
       type: string
       default:  mpstat | awk '$3 ~ /CPU/ { for(i=1;i<=NF;i++) { if ($i ~ /%idle/) field=i } } $3 ~ /all/ { printf(100 - $field) }'
   cmd_results_cpu:
       required: true
       type: string
       default: ps -eo pid,pcpu,user,args --sort=-%cpu | head -6 | head -c 1000
   cmd_mem:
       required: true
       type: string
       default:  free | awk 'FNR == 3 {print $3/($3+$4)*100}'
   cmd_results_mem:
       required: true
       type: string
       default: ps -eo pid,ppid,cmd,%mem --sort=-%mem | head -6 | head -c 1000


