
name: mcpu
pack: new_proj
description: Run a series of simulated actions
enabled: true
runner_type: orquesta
entry_point: workflows/mcpu.yaml

parameters:
    cmd1:
       required: true
       type: string
       default:  mpstat 1 5 | awk 'END{print 100-$NF}'
    cmd2:
       required: true
       type: string
       default: ps -eo pid,pcpu,user,args --sort=-%cpu | head -6 | head -c 1000
    cmd_mem:
       required: true
       type: string
       default:  free | awk 'FNR == 3 {print $3/($3+$4)*100}'
    cmd1_mem:
       required: true
       type: string
       default: ps -eo pid,ppid,cmd,%mem --sort=-%mem | head


